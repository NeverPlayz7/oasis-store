<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OASIS - Luxury Experience</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

body{
font-family:'Inter',sans-serif;
background:#fff;
margin:0;
overflow-x:hidden;
transition:0.3s;
}

.dark body{
background:#000;
color:#fff;
}

.fade{animation:fadeEffect 1.5s}
@keyframes fadeEffect{from{opacity:.4}to{opacity:1}}

.star-rating i{font-size:11px}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="bg-black p-4 flex justify-between items-center sticky top-0 z-[100]">
<h1 class="text-white text-3xl font-black italic tracking-tighter ml-4">OASIS</h1>

<div class="flex-1 max-w-md mx-10 relative hidden md:block">
<input type="text" id="srch" oninput="searchItems()" placeholder="Search products..."
class="w-full bg-white p-2 px-6 rounded-md text-xs outline-none">
</div>

<div class="flex gap-6 items-center mr-4 text-white">
<i onclick="toggleDark()" class="fa fa-moon cursor-pointer"></i>

<div class="relative cursor-pointer" onclick="toggleCart()">
<i class="fa fa-shopping-bag text-xl"></i>
<span id="cCount"
class="absolute -top-2 -right-2 bg-white text-black text-[9px] w-4 h-4 rounded-full flex items-center justify-center font-bold">0</span>
</div>
</div>
</nav>

<!-- SLIDER -->
<section class="relative w-full h-[350px] md:h-[500px] overflow-hidden bg-gray-100">
<div class="mySlides fade h-full">
<img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=2000"
class="w-full h-full object-cover">
</div>

<div class="mySlides fade h-full hidden">
<img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=2000"
class="w-full h-full object-cover">
</div>

<div class="mySlides fade h-full hidden">
<img src="https://images.unsplash.com/photo-1508685096489-7aac29145fe4?q=80&w=2000"
class="w-full h-full object-cover">
</div>
</section>

<!-- FLASH TIMER -->
<section class="py-10 text-center border-b bg-white">
<p class="font-bold text-sm mb-4">ðŸ”¥ Flash Sale Ends In:</p>
<div class="flex justify-center gap-2 text-white font-black text-lg">
<span class="bg-pink-600 px-5 py-2 rounded-lg" id="th"></span>
<span class="bg-pink-600 px-5 py-2 rounded-lg" id="tm"></span>
<span class="bg-pink-600 px-5 py-2 rounded-lg" id="ts"></span>
</div>
</section>

<!-- PRODUCTS -->
<main class="max-w-7xl mx-auto px-6 py-16">
<div id="pGrid" class="grid grid-cols-2 md:grid-cols-4 gap-x-10 gap-y-16"></div>
</main>

<!-- CART -->
<div id="cartSide"
class="fixed right-0 top-0 h-full w-80 bg-white shadow-2xl z-[150] translate-x-full transition duration-300 p-6 flex flex-col">

<div class="flex justify-between mb-6">
<h2 class="text-xl font-black">YOUR BAG</h2>
<i class="fa fa-times cursor-pointer" onclick="toggleCart()"></i>
</div>

<div id="cartItems" class="flex-1 overflow-y-auto space-y-4"></div>

<div class="border-t pt-4">
<div class="flex justify-between font-black text-lg">
<span>Total:</span><span id="totalP">Rs.0</span>
</div>

<button onclick="placeOrder()"
class="mt-4 w-full bg-black text-white py-3 rounded-xl font-bold text-xs uppercase hover:bg-zinc-800 transition">
Checkout via WhatsApp
</button>
</div>
</div>

<script>
const REPO="NeverPlayz7/oasis-store";
let products=[];
let cart=JSON.parse(localStorage.getItem("cart"))||[];
let slideIndex=0;

/* SLIDER */
function showSlides(){
let slides=document.getElementsByClassName("mySlides");
for(let i=0;i<slides.length;i++)slides[i].classList.add("hidden");
slideIndex++;
if(slideIndex>slides.length)slideIndex=1;
slides[slideIndex-1].classList.remove("hidden");
setTimeout(showSlides,4000);
}

/* INIT */
async function init(){
showSlides();
try{
const r=await fetch(`https://raw.githubusercontent.com/${REPO}/main/data.json?t=${Date.now()}`);
products=await r.json();
render(products);
}catch(e){
console.log("Using fallback products");
products=[
{name:"Luxury Watch",price:4500,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=2000"},
{name:"Sneakers",price:6500,image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=2000"}
];
render(products);
}
updateUI();
}

/* RENDER */
function render(data){
document.getElementById("pGrid").innerHTML=data.map(p=>`
<div class="group">
<div class="rounded-2xl overflow-hidden bg-gray-100 aspect-square mb-4">
<img src="${p.image}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500">
</div>
<h3 class="font-bold text-xs uppercase text-gray-400">${p.name}</h3>
<p class="font-black text-lg mb-2">Rs.${p.price}</p>
<div class="star-rating text-black mb-3">
<i class="fa fa-star"></i><i class="fa fa-star"></i>
<i class="fa fa-star"></i><i class="fa fa-star"></i>
<i class="fa fa-star"></i>
</div>
<button onclick="addToCart('${p.name}',${p.price},'${p.image}')"
class="bg-black text-white text-xs font-bold py-2 px-6 rounded-md uppercase hover:bg-zinc-800 transition">
Add to Cart
</button>
</div>
`).join("");
}

/* CART */
function addToCart(n,p,i){
cart.push({n,p,i});
localStorage.setItem("cart",JSON.stringify(cart));
updateUI();
toggleCart(true);
}

function updateUI(){
document.getElementById("cCount").innerText=cart.length;
let total=0;

document.getElementById("cartItems").innerHTML=cart.map((c,index)=>{
total+=parseInt(c.p);
return`
<div class="flex items-center gap-3">
<img src="${c.i}" class="w-14 h-14 rounded-lg object-cover">
<div class="flex-1">
<p class="text-xs font-bold">${c.n}</p>
<p class="text-sm">Rs.${c.p}</p>
</div>
<i onclick="removeItem(${index})"
class="fa fa-trash text-gray-400 cursor-pointer hover:text-red-500"></i>
</div>
`;
}).join("");

document.getElementById("totalP").innerText="Rs."+total;
}

function removeItem(i){
cart.splice(i,1);
localStorage.setItem("cart",JSON.stringify(cart));
updateUI();
}

function toggleCart(force=null){
const side=document.getElementById("cartSide");
if(force===true)side.classList.remove("translate-x-full");
else side.classList.toggle("translate-x-full");
}

/* SEARCH */
function searchItems(){
let q=document.getElementById("srch").value.toLowerCase();
let filtered=products.filter(p=>p.name.toLowerCase().includes(q));
render(filtered);
}

/* DARK MODE */
function toggleDark(){
document.documentElement.classList.toggle("dark");
}

/* WHATSAPP ORDER */
function placeOrder(){
if(cart.length===0)return alert("Bag empty");
let msg="*NEW ORDER - OASIS*%0A%0A";
cart.forEach(x=>msg+=`â€¢ ${x.n} - Rs.${x.p}%0A`);
window.open(`https://wa.me/923138974516?text=${msg}`);
}

/* TIMER */
setInterval(()=>{
const d=new Date();
document.getElementById("th").innerText=(23-d.getHours())+"h";
document.getElementById("tm").innerText=(59-d.getMinutes())+"m";
document.getElementById("ts").innerText=(59-d.getSeconds())+"s";
},1000);

init();
</script>

</body>
</html>
